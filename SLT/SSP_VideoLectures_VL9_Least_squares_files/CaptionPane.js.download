(()=>{"use strict";var e,t={71967:(e,t,n)=>{var o=n(76702),a=n(27898);Panopto=Panopto||{},Panopto.CaptionPane=(0,o.bootstrapReactComponent)(a.J)},61327:(e,t,n)=>{n.d(t,{b:()=>d});var o=n(87363),a=n(60390),s=n(73672),i=n(26056),r=n.n(i),p=n(76702),l=function(e,t,n,o){var a,s=arguments.length,i=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(i=(s<3?a(i):s>3?a(t,n,i):a(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class c extends o.Component{constructor(e){super(e),this.state={menuOpen:!1}}render(){return o.createElement(o.Fragment,null,o.createElement(p.Input.Button,{id:"importTranscriptButton",innerRef:e=>this.anchorElement=e,className:this.props.classes.button,isMenuButton:!0,isMenuOpen:this.state.menuOpen,useKeyUpForSpacebar:!0,onActivate:this.handleMenuOpen},o.createElement("span",null,this.props.resources.ViewerPlus_Edit_ImportTranscript),o.createElement(r(),{path:s.iW9,size:"24px","aria-hidden":!0})),o.createElement(p.Material.Menu,{open:this.state.menuOpen,anchorEl:this.anchorElement,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:void 0,onClose:this.handleMenuClose,MenuListProps:{className:this.props.classes.menuList},PopoverClasses:{paper:this.props.classes.popover}},this.props.machineTranscriptAvailable&&o.createElement(p.Material.MenuItem,{id:"importMachineTranscriptButton",className:this.props.classes.menuItem,onClick:this.handleMachineTranscriptImported},this.props.hasManualCaptions?this.props.resources.ViewerPlus_Edit_ReplaceWithMachineTranscript:this.props.resources.ViewerPlus_Edit_ImportMachineTranscript),o.createElement(p.Material.MenuItem,{id:"requestTranscriptButton",className:this.props.classes.menuItem,onClick:this.handleCaptionModalOpened},this.props.resources.ViewerPlus_Edit_RequestTranscript)))}handleMenuOpen(){this.setState({menuOpen:!0})}handleMenuClose(){this.setState({menuOpen:!1})}handleMachineTranscriptImported(){this.props.onMachineTranscriptImported(),this.handleMenuClose()}handleCaptionModalOpened(){this.props.onCaptionModalOpened(),this.handleMenuClose()}}l([a.MR],c.prototype,"handleMenuOpen",null),l([a.MR],c.prototype,"handleMenuClose",null),l([a.MR],c.prototype,"handleMachineTranscriptImported",null),l([a.MR],c.prototype,"handleCaptionModalOpened",null);const d=p.Material.withStyles((()=>p.Material.createStyles({button:{cursor:"pointer",display:"flex",alignItems:"center","& svg":{display:"block"}},menuList:{paddingTop:"0",paddingBottom:"0"},popover:{borderRadius:"0px"},menuItem:{"&:hover":{backgroundColor:"rgba(0, 0, 0, .05)"},"&:active":{backgroundColor:"rgba(0, 0, 0, .1)"},cursor:"pointer",fontFamily:"Segoe UI,Helvetica,sans-serif",fontSize:"14px",color:"rgb(70, 70, 70)",textAlign:"left",padding:"4px"}})))(c)},27898:(e,t,n)=>{n.d(t,{J:()=>g});var o=n(87363),a=n(12611),s=n.n(a),i=n(60390),r=n(73672),p=n(76702),l=n(70747),c=n(17835),d=n(99030),h=n(61327),u=n(51840),m=n(2942),f=function(e,t,n,o){var a,s=arguments.length,i=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(i=(s<3?a(i):s>3?a(t,n,i):a(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};const C=384;class x extends o.Component{constructor(e){super(e),this.parsedCaptions=[],this.matches=[],this.lowConfidenceSpans=[],this.captionListRef=o.createRef(),this.state={toolbarVisible:!1,query:"",replacementText:"",newCaptionText:""}}componentDidMount(){document.addEventListener("keydown",this.handleDocumentKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleDocumentKeyDown)}componentDidUpdate(e,t){const n={};if(void 0===this.state.matchIndex?this.matches.length&&(n.matchIndex=0):this.state.matchIndex>=this.matches.length&&(n.matchIndex=this.matches.length?this.matches.length-1:void 0),void 0===this.state.lowConfidenceSpanIndex?this.lowConfidenceSpans.length&&(n.lowConfidenceSpanIndex=-1):this.state.lowConfidenceSpanIndex>=this.lowConfidenceSpans.length&&(n.lowConfidenceSpanIndex=this.lowConfidenceSpans.length?this.lowConfidenceSpans.length-1:void 0),void 0!==this.state.lowConfidenceSpanIndex&&this.state.lowConfidenceSpanIndex!==t.lowConfidenceSpanIndex&&-1!==this.state.lowConfidenceSpanIndex){const e=this.lowConfidenceSpans[this.state.lowConfidenceSpanIndex];n.matchIndex=this.matches.findIndex((t=>-1!==t.parts.indexOf(e.parts[0])))}Object.keys(n).length?this.setState(n):!this.props.selected&&e.selected&&this.handleToolbarClose()}render(){return this.parsedCaptions=this.props.captions.map((e=>d.xK(e,this.state.query))),this.matches=d.mw(this.parsedCaptions),this.lowConfidenceSpans=d.DN(this.parsedCaptions,this.props.lowConfidenceThreshold),o.createElement("div",{className:this.props.classes.root},o.createElement("div",{className:this.props.classes.header,style:{visibility:this.state.toolbarVisible?"hidden":"visible"}},o.createElement("div",{className:this.props.classes.headerContent},o.createElement(c.$,{resources:this.props.resources,availableLanguages:this.props.availableLanguages,defaultLanguage:this.props.defaultLanguage,onLanguageSelected:this.props.onLanguageSelected}),o.createElement(h.b,{resources:this.props.resources,machineTranscriptAvailable:this.props.machineTranscriptAvailable,hasManualCaptions:this.props.captions.length>0,onMachineTranscriptImported:this.props.onMachineTranscriptImported,onCaptionModalOpened:this.props.onCaptionModalOpened})),o.createElement(p.Material.StyledTooltip,{title:o.createElement("span",null,this.props.resources.CaptionPane_FindAndReplace,"   ",o.createElement("b",null,(l.Browser.isMac?"Cmd":"Ctrl")+"+F")),placement:"bottom"},o.createElement("div",null,o.createElement(p.Input.IconButton,{className:this.props.classes.iconButton,path:r.eNv,size:"24px",ariaLabel:this.props.resources.CaptionPane_FindAndReplace,onActivate:this.handleToolbarOpen})))),this.state.toolbarVisible&&o.createElement("div",{className:this.props.classes.toolbarWrapper},o.createElement(u.$,{resources:this.props.resources,query:this.state.query,replacementText:this.state.replacementText,matches:this.matches,matchIndex:this.state.matchIndex,lowConfidenceSpans:this.lowConfidenceSpans,lowConfidenceSpanIndex:this.state.lowConfidenceSpanIndex,focusCounter:this.state.toolbarFocusCounter,onQueryChange:this.handleQueryChange,onReplacementTextChange:this.handleReplacementTextChange,onPreviousMatch:this.handlePreviousMatch,onNextMatch:this.handleNextMatch,onReplace:this.handleReplace,onReplaceAll:this.handleReplaceAll,onPreviousLowConfidenceSpan:this.handlePreviousLowConfidenceSpan,onNextLowConfidenceSpan:this.handleNextLowConfidenceSpan,onClose:this.handleToolbarClose})),o.createElement("div",{ref:this.captionListRef,className:this.props.classes.captionList},this.parsedCaptions.map(((e,t)=>o.createElement(m.u,{key:e.caption.id,lang:this.props.lang,resources:this.props.resources,maxCaptionLength:C,lowConfidenceThreshold:this.props.lowConfidenceThreshold,parsedCaption:e,captionIndex:t,focusedCaptionIndex:this.state.focusedCaptionIndex,currentMatch:void 0!==this.state.matchIndex?this.matches[this.state.matchIndex]:void 0,scrollContainer:this.captionListRef.current,onCaptionTextChange:this.handleCaptionTextChange,onLowConfidenceSpanClick:this.handleLowConfidenceSpanClick,onSeek:this.props.onSeek,onEditModalOpen:this.handleCaptionEditModalOpened,onDelete:this.handleCaptionDeleted,onSetFocusedCaptionIndex:this.handleSetFocusedCaptionIndex})))),o.createElement("textarea",{className:this.props.classes.textarea,placeholder:this.props.resources.ViewerPlus_Edit_AddCaption,value:this.state.newCaptionText,maxLength:C,dir:"auto",onChange:this.handleTextareaChange,onKeyDown:this.handleTextareaKeyDown}))}replaceMatch(e){let t=!0;const n=[...e.parsedCaption.parts],o=n.indexOf(e.parts[0]);return o>-1&&(n.splice(o,e.parts.length,{id:s().uniqueId("replacementPart"),text:this.state.replacementText,confidence:100,isMatch:this.state.query===this.state.replacementText}),d.bv(n).length>C?t=!1:e.parsedCaption.parts=n),t}replaceMatches(e){const t=e.filter((e=>!this.replaceMatch(e)));return t.length&&p.Dialogs.PanoptoConfirmController.confirm({title:this.props.resources.CaptionPane_MaximumCaptionLength_Title,message:String.format(1===t.length?this.props.resources.CaptionPane_MaximumCaptionLength_Message_Singular:this.props.resources.CaptionPane_MaximumCaptionLength_Message_Plural,t.length,this.state.query,C),confirmMessage:this.props.resources.CaptionPane_MaximumCaptionLength_ConfirmMessage,brandColor:(0,l.accentSafeColor)(),hideOverlay:!0,onClose:()=>{}}),t.length!==e.length}handleCaptionsEdited(e){this.props.onCaptionsEdited(e.map(d.X8))}spanToQueryText(e){return e.parts.reduce(((e,t)=>e+t.text),"")}handleDocumentKeyDown(e){this.props.selected&&(e.ctrlKey||e.metaKey)&&"f"===e.key&&(e.preventDefault(),this.state.toolbarVisible?this.setState((e=>({toolbarFocusCounter:(e.toolbarFocusCounter||0)+1}))):this.handleToolbarOpen())}handleToolbarOpen(){this.props.onToolbarToggled(!0),this.setState({toolbarVisible:!0})}handleToolbarClose(){this.props.onToolbarToggled(!1),this.setState({toolbarVisible:!1,query:"",replacementText:"",matchIndex:void 0,lowConfidenceSpanIndex:void 0})}handleQueryChange(e){this.setState({query:e})}handleReplacementTextChange(e){this.setState({replacementText:e})}handlePreviousMatch(){this.setState((e=>({matchIndex:void 0!==e.matchIndex?e.matchIndex>0?e.matchIndex-1:e.matchIndex:void 0})))}handleNextMatch(){this.setState((e=>({matchIndex:void 0!==e.matchIndex?e.matchIndex<this.matches.length-1?e.matchIndex+1:e.matchIndex:void 0})))}handleReplace(){if(void 0!==this.state.matchIndex){const e=this.matches[this.state.matchIndex];e&&this.replaceMatches([e])&&(-1!==this.state.replacementText.indexOf(this.state.query)&&this.setState((e=>{var t;return{matchIndex:((null!==(t=e.matchIndex)&&void 0!==t?t:0)+1)%this.matches.length}})),this.handleCaptionsEdited([e.parsedCaption]))}}handleReplaceAll(){this.matches.length&&this.replaceMatches(this.matches)&&(-1!==this.state.replacementText.indexOf(this.state.query)&&this.setState({matchIndex:0}),this.handleCaptionsEdited(this.matches.map((e=>e.parsedCaption))))}handlePreviousLowConfidenceSpan(){this.setState((e=>{const t={lowConfidenceSpanIndex:void 0!==e.lowConfidenceSpanIndex?e.lowConfidenceSpanIndex>0?e.lowConfidenceSpanIndex-1:e.lowConfidenceSpanIndex:void 0};return void 0!==t.lowConfidenceSpanIndex&&(t.matchIndex=void 0,t.query=this.spanToQueryText(this.lowConfidenceSpans[t.lowConfidenceSpanIndex])),t}))}handleNextLowConfidenceSpan(){this.setState((e=>{const t={lowConfidenceSpanIndex:void 0!==e.lowConfidenceSpanIndex?e.lowConfidenceSpanIndex<this.lowConfidenceSpans.length-1?e.lowConfidenceSpanIndex+1:e.lowConfidenceSpanIndex:void 0};return void 0!==t.lowConfidenceSpanIndex&&(t.matchIndex=void 0,t.query=this.spanToQueryText(this.lowConfidenceSpans[t.lowConfidenceSpanIndex])),t}))}handleCaptionTextChange(e){this.handleCaptionsEdited([e])}handleLowConfidenceSpanClick(e){const t=this.lowConfidenceSpans.find((t=>t.parts.find((t=>t.id===e))));t&&(this.props.onToolbarToggled(!0),this.setState({toolbarVisible:!0,query:this.spanToQueryText(t),lowConfidenceSpanIndex:this.lowConfidenceSpans.indexOf(t)}))}handleCaptionEditModalOpened(e){this.props.onCaptionEditModalOpened(e.caption)}handleCaptionDeleted(e){this.props.onCaptionDeleted(e.caption)}handleTextareaChange(e){!this.state.newCaptionText&&e.target.value&&this.props.onSetStartTime(),this.setState({newCaptionText:e.target.value})}handleTextareaKeyDown(e){"Enter"===e.key&&(e.preventDefault(),this.props.onCaptionAdded(this.state.newCaptionText),this.setState({newCaptionText:""}))}handleSetFocusedCaptionIndex(e){this.setState({focusedCaptionIndex:e})}}f([i.MR],x.prototype,"handleDocumentKeyDown",null),f([i.MR],x.prototype,"handleToolbarOpen",null),f([i.MR],x.prototype,"handleToolbarClose",null),f([i.MR],x.prototype,"handleQueryChange",null),f([i.MR],x.prototype,"handleReplacementTextChange",null),f([i.MR],x.prototype,"handlePreviousMatch",null),f([i.MR],x.prototype,"handleNextMatch",null),f([i.MR],x.prototype,"handleReplace",null),f([i.MR],x.prototype,"handleReplaceAll",null),f([i.MR],x.prototype,"handlePreviousLowConfidenceSpan",null),f([i.MR],x.prototype,"handleNextLowConfidenceSpan",null),f([i.MR],x.prototype,"handleCaptionTextChange",null),f([i.MR],x.prototype,"handleLowConfidenceSpanClick",null),f([i.MR],x.prototype,"handleCaptionEditModalOpened",null),f([i.MR],x.prototype,"handleCaptionDeleted",null),f([i.MR],x.prototype,"handleTextareaChange",null),f([i.MR],x.prototype,"handleTextareaKeyDown",null),f([i.MR],x.prototype,"handleSetFocusedCaptionIndex",null);const g=p.Material.withStyles((()=>p.Material.createStyles({root:{fontFamily:"Segoe UI,Helvetica,sans-serif",fontSize:"14px",color:"rgb(70, 70, 70)",display:"flex",flexDirection:"column",height:"100%"},header:{display:"flex",gap:8,padding:8,paddingBottom:26,alignItems:"flex-start"},headerContent:{flexGrow:1,flexShrink:1},iconButton:{borderRadius:3,padding:3,cursor:"pointer",alignSelf:"start","&:hover":{backgroundColor:"rgba(0, 0, 0, .05)"},"&:active":{backgroundColor:"rgba(0, 0, 0, .1)"},"& svg":{display:"block"}},toolbarWrapper:{position:"absolute",left:0,top:0,right:0,backgroundColor:"white"},captionList:{flexShrink:1,padding:1,overflowY:"auto"},textarea:{height:53,border:"1px solid #cccccc",padding:"2px 6px 2px 4px",margin:"4px 0px 5px 2px",resize:"none",fontFamily:"Segoe UI,Helvetica,sans-serif",fontSize:"14px",justifySelf:"stretch",flexShrink:0}})))(x)},2942:(e,t,n)=>{n.d(t,{u:()=>f});var o=n(87363),a=n(60390),s=n(72779),i=n.n(s),r=n(70747),p=n(73672),l=n(26056),c=n.n(l),d=n(76702),h=n(15720),u=function(e,t,n,o){var a,s=arguments.length,i=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(i=(s<3?a(i):s>3?a(t,n,i):a(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class m extends o.Component{constructor(e){super(e),this.rowRef=o.createRef(),this.state={menuOpen:!1}}render(){const e=new r.Helpers.TimeHelpers(this.props.lang).formatDuration(this.props.parsedCaption.caption.viewerTime,this.props.resources.TimeSeparator);return o.createElement(o.Fragment,null,o.createElement("div",{ref:this.rowRef,className:i()(this.props.classes.root,"edit-caption-row"),onClick:this.handleClick},o.createElement(h.i,{resources:this.props.resources,maxCaptionLength:this.props.maxCaptionLength,lowConfidenceThreshold:this.props.lowConfidenceThreshold,parsedCaption:this.props.parsedCaption,captionIndex:this.props.captionIndex,focusedCaptionIndex:this.props.focusedCaptionIndex,currentMatch:this.props.currentMatch,scrollContainer:this.props.scrollContainer,onCaptionTextChange:this.props.onCaptionTextChange,onLowConfidenceSpanClick:this.props.onLowConfidenceSpanClick,onSetFocusedCaptionIndex:this.props.onSetFocusedCaptionIndex}),o.createElement(d.Input.IconButton,{innerRef:e=>this.iconButtonElement=e,className:i()({[this.props.classes.moreIcon]:!0,[this.props.classes.moreIconVisible]:this.state.menuOpen}),title:this.props.resources.ViewerPlus_EventMore,path:p.SXi,size:"24px",isMenuButton:!0,isMenuOpen:this.state.menuOpen,useKeyUpForSpacebar:!0,onActivate:this.handleMoreIconActivate}),o.createElement("div",{className:i()(this.props.classes.timestamp,"caption-timestamp")},e)),o.createElement(d.Material.Menu,{open:this.state.menuOpen,anchorEl:this.iconButtonElement,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},getContentAnchorEl:void 0,onClose:this.handleMenuClose,MenuListProps:{className:this.props.classes.menuList},PopoverClasses:{paper:this.props.classes.popover}},o.createElement(d.Material.MenuItem,{className:this.props.classes.menuItem,onClick:this.handleEditClick},o.createElement(c(),{className:this.props.classes.menuItemIcon,path:p.r9,size:"24px","aria-hidden":!0}),this.props.resources.ViewerPlus_EventEdit),o.createElement(d.Material.MenuItem,{className:this.props.classes.menuItem,onClick:this.handleDeleteClick},o.createElement(c(),{className:this.props.classes.menuItemIcon,path:p.x9U,size:"24px","aria-hidden":!0}),this.props.resources.ViewerPlus_EventDelete)))}handleClick(){this.props.onSeek(this.props.parsedCaption.caption.viewerTime)}handleMoreIconActivate(e){e.stopPropagation(),this.setState({menuOpen:!0})}handleMenuClose(){this.setState({menuOpen:!1})}handleEditClick(){this.handleMenuClose(),this.props.onEditModalOpen(this.props.parsedCaption)}handleDeleteClick(){this.handleMenuClose(),this.props.onDelete(this.props.parsedCaption)}}u([a.MR],m.prototype,"handleClick",null),u([a.MR],m.prototype,"handleMoreIconActivate",null),u([a.MR],m.prototype,"handleMenuClose",null),u([a.MR],m.prototype,"handleEditClick",null),u([a.MR],m.prototype,"handleDeleteClick",null);const f=d.Material.withStyles((()=>d.Material.createStyles({root:{display:"flex",alignItems:"start",fontFamily:"Segoe UI,Helvetica,sans-serif",fontSize:"14px",color:"rgb(70, 70, 70)",cursor:"pointer",margin:"3px 0px","&:hover, &:focus, &:focus-within":{"& $moreIcon":{visibility:"visible"}}},moreIcon:{visibility:"hidden",width:26,height:29,display:"flex",alignItems:"center",borderRadius:3,"&:hover":{backgroundColor:"rgba(0, 0, 0, .05)"},"&:active":{backgroundColor:"rgba(0, 0, 0, .1)"}},moreIconVisible:{visibility:"visible"},timestamp:{padding:"4px 8px 6px 8px",borderRadius:3,"&:hover":{backgroundColor:"rgba(0, 0, 0, .05)"},"&:active":{backgroundColor:"rgba(0, 0, 0, .1)"}},menuList:{paddingTop:0,paddingBottom:0},popover:{borderRadius:0},menuItem:{fontFamily:"Segoe UI,Helvetica,sans-serif",fontSize:"14px",color:"rgb(70, 70, 70)",textAlign:"left",padding:"4px 12px 4px 4px"},menuItemIcon:{paddingRight:4}})))(m)},15720:(e,t,n)=>{n.d(t,{i:()=>h});var o=n(87363),a=n(60390),s=n(72779),i=n.n(s),r=n(76702),p=n(70747),l=n(99030),c=function(e,t,n,o){var a,s=arguments.length,i=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(i=(s<3?a(i):s>3?a(t,n,i):a(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class d extends o.Component{constructor(e){super(e),this.containerRef=o.createRef(),this.state={maxLengthErrorShown:!1}}render(){return o.createElement("div",{className:this.props.classes.root},o.createElement("div",{ref:this.containerRef,className:i()(this.props.classes.contentEditable,"caption-text"),contentEditable:!0,dangerouslySetInnerHTML:{__html:(0,l.hs)(this.props.parsedCaption,this.props.currentMatch,this.props.lowConfidenceThreshold,this.props.classes.match,this.props.classes.lowConfidence,this.props.classes.highlightedMatch)},onFocus:this.handleContentEditableFocus,onKeyDown:this.handleContentEditableKeyDown,onInput:this.handleContentEditableInput,onBlur:this.handleContentEditableBlur}),this.state.maxLengthErrorShown&&o.createElement("div",{className:this.props.classes.errorText},this.props.resources.ViewerPlus_Edit_CaptionLengthNotification))}componentDidMount(){this.attachListeners(),this.containerRef.current&&p.Helpers.enforceContentEditableMaxLength(this.containerRef.current,this.props.maxCaptionLength)}componentDidUpdate(e){var t,n,o;this.attachListeners(),this.props.captionIndex===this.props.focusedCaptionIndex&&e.captionIndex!==e.focusedCaptionIndex&&(null===(t=this.containerRef.current)||void 0===t||t.focus());const a=null===(n=this.containerRef.current)||void 0===n?void 0:n.querySelector(`.${this.props.classes.highlightedMatch}`);a&&this.props.scrollContainer&&this.props.currentMatch!==e.currentMatch&&(null===(o=this.props.currentMatch)||void 0===o?void 0:o.parsedCaption.caption.id)===this.props.parsedCaption.caption.id&&!p.Helpers.isInView(a,this.props.scrollContainer)&&a.scrollIntoView(!0)}handleContentEditableFocus(){this.props.onSetFocusedCaptionIndex(this.props.captionIndex),this.handleContentEditableInput()}handleContentEditableKeyDown(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),this.props.onSetFocusedCaptionIndex(this.props.captionIndex+1))}handleContentEditableInput(){var e,t;const n=(null===(t=null===(e=this.containerRef.current)||void 0===e?void 0:e.textContent)||void 0===t?void 0:t.length)||0;this.setState({maxLengthErrorShown:n>=this.props.maxCaptionLength})}handleContentEditableBlur(){if(this.containerRef.current){const e=(0,l.$T)(this.containerRef.current,this.props.parsedCaption,this.props.classes.match);JSON.stringify(this.props.parsedCaption.parts)!==JSON.stringify(e.parts)&&this.props.onCaptionTextChange(e)}this.setState({maxLengthErrorShown:!1})}attachListenersAtElement(e){Array.from(e.children).forEach((e=>{e.getAttribute("class")===this.props.classes.match?this.attachListenersAtElement(e):e.getAttribute("class")===this.props.classes.lowConfidence&&(e.setAttribute("title",this.props.resources.CaptionTextEditor_LowConfidenceWord),e.onclick=()=>{this.handleContentEditableBlur(),this.props.onLowConfidenceSpanClick(e.id)})}))}attachListeners(){this.containerRef.current&&this.attachListenersAtElement(this.containerRef.current)}}c([a.MR],d.prototype,"handleContentEditableFocus",null),c([a.MR],d.prototype,"handleContentEditableKeyDown",null),c([a.MR],d.prototype,"handleContentEditableInput",null),c([a.MR],d.prototype,"handleContentEditableBlur",null);const h=r.Material.withStyles((()=>r.Material.createStyles({root:{flexGrow:1,display:"flex",flexDirection:"column",minWidth:0},contentEditable:{flexGrow:1,padding:"4px 8px 6px 8px",cursor:"text",minHeight:16,border:0,borderRadius:3,whiteSpace:"pre-wrap","&:hover":{backgroundColor:"rgba(0, 0, 0, .05)"},"&:focus":{backgroundColor:"transparent"}},match:{backgroundColor:"rgb(255, 253, 56)"},lowConfidence:{borderBottom:"1px dashed rgb(70, 70, 70)",cursor:"pointer","&:hover":{backgroundColor:"rgba(0, 0, 0, .05)"}},highlightedMatch:{backgroundColor:"rgb(253, 150, 64)"},errorText:{color:"#990000",padding:"0px 8px 8px 8px",textAlign:"right"}})))(d)},51840:(e,t,n)=>{n.d(t,{$:()=>f});var o=n(87363),a=n(60390),s=n(72779),i=n.n(s),r=n(73672),p=n(26056),l=n.n(p),c=n(76702),d=n(70747),h=n(6103),u=function(e,t,n,o){var a,s=arguments.length,i=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(i=(s<3?a(i):s>3?a(t,n,i):a(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class m extends o.Component{constructor(){super(...arguments),this.findInput=o.createRef(),this.matchControlsWrapper=o.createRef()}render(){var e;return o.createElement("div",{className:this.props.classes.root,onKeyDown:this.handleKeyDown},o.createElement("div",{className:this.props.classes.findAndReplaceWrapper},o.createElement("div",{className:this.props.classes.inputWrapper},o.createElement("div",{className:i()(this.props.classes.absoluteWrapper,this.props.classes.findIconWrapper)},o.createElement(l(),{path:r.I0v,size:"18px","aria-hidden":!0})),o.createElement("input",{ref:this.findInput,className:i()(this.props.classes.input,this.props.classes.findInput),type:"text",placeholder:this.props.resources.FindAndReplaceToolbar_Find,value:this.props.query||"",autoFocus:!0,onChange:this.handleQueryChange,onKeyDown:this.handleFindInputKeyDown}),o.createElement("div",{ref:this.matchControlsWrapper,className:i()(this.props.classes.absoluteWrapper,this.props.classes.matchControlsWrapper)},o.createElement("span",null,`${void 0!==this.props.matchIndex?this.props.matchIndex+1:0}/${(null===(e=this.props.matches)||void 0===e?void 0:e.length)||0}`," "),o.createElement(c.Material.StyledTooltip,{title:this.getTitleWithKeyboardShortcut(this.props.resources.FindAndReplaceToolbar_PreviousInstance,"["),placement:"bottom"},o.createElement("div",null,o.createElement(c.Input.IconButton,{className:this.props.classes.pressable,path:r.gAv,size:"18px",disabled:!this.previousButtonEnabled(this.props.matches,this.props.matchIndex),ariaLabel:this.props.resources.FindAndReplaceToolbar_PreviousInstance,onActivate:this.props.onPreviousMatch}))),o.createElement(c.Material.StyledTooltip,{title:this.getTitleWithKeyboardShortcut(this.props.resources.FindAndReplaceToolbar_NextInstance,"]"),placement:"bottom"},o.createElement("div",null,o.createElement(c.Input.IconButton,{className:this.props.classes.pressable,path:r.zrb,size:"18px",disabled:!this.nextButtonEnabled(this.props.matches,this.props.matchIndex),ariaLabel:this.props.resources.FindAndReplaceToolbar_NextInstance,onActivate:this.props.onNextMatch}))))),o.createElement("div",{className:this.props.classes.inputWrapper},o.createElement("input",{className:this.props.classes.input,type:"text",placeholder:this.props.resources.FindAndReplaceToolbar_ReplaceWith,value:this.props.replacementText,onChange:this.handleReplacementTextChange,onKeyDown:this.handleReplaceInputKeyDown}))),o.createElement("div",{className:this.props.classes.buttonWrapper},o.createElement(c.Material.StyledTooltip,{title:this.getTitleWithKeyboardShortcut(this.props.resources.FindAndReplaceToolbar_Replace,"P"),placement:"bottom",arrow:!1},o.createElement("div",null,o.createElement(c.Input.Button,{className:i()([this.props.classes.button,this.props.classes.pressable]),onActivate:this.props.onReplace,disabled:void 0===this.props.matchIndex},o.createElement(h.l,{className:this.props.classes.replaceIcon,"aria-hidden":!0}),this.props.resources.FindAndReplaceToolbar_Replace))),o.createElement(c.Material.StyledTooltip,{title:this.getTitleWithKeyboardShortcut(this.props.resources.FindAndReplaceToolbar_ReplaceAll,"P",{alt:!0}),placement:"bottom",arrow:!1},o.createElement("div",null,o.createElement(c.Input.Button,{className:i()([this.props.classes.button,this.props.classes.pressable]),onActivate:this.props.onReplaceAll,disabled:void 0===this.props.matchIndex},o.createElement(h.p,{className:this.props.classes.replaceIcon,"aria-hidden":!0}),this.props.resources.FindAndReplaceToolbar_ReplaceAll))),this.props.lowConfidenceSpans&&this.props.lowConfidenceSpans.length>0&&o.createElement(o.Fragment,null,o.createElement(c.Material.StyledTooltip,{title:this.getTitleWithKeyboardShortcut(this.props.resources.FindAndReplaceToolbar_PreviousLowConfidenceWord,"[",{alt:!0}),placement:"bottom"},o.createElement("div",null,o.createElement(c.Input.IconButton,{className:this.props.classes.pressable,path:r.J3k,size:"24px",disabled:!this.previousButtonEnabled(this.props.lowConfidenceSpans,this.props.lowConfidenceSpanIndex),ariaLabel:this.props.resources.FindAndReplaceToolbar_PreviousLowConfidenceWord,onActivate:this.props.onPreviousLowConfidenceSpan}))),o.createElement(c.Material.StyledTooltip,{title:this.getTitleWithKeyboardShortcut(this.props.resources.FindAndReplaceToolbar_NextLowConfidenceWord,"]",{alt:!0}),placement:"bottom"},o.createElement("div",null,o.createElement(c.Input.IconButton,{className:this.props.classes.pressable,path:r.aIO,size:"24px",disabled:!this.nextButtonEnabled(this.props.lowConfidenceSpans,this.props.lowConfidenceSpanIndex),ariaLabel:this.props.resources.FindAndReplaceToolbar_NextLowConfidenceWord,onActivate:this.props.onNextLowConfidenceSpan})))),o.createElement("div",{className:this.props.classes.spacer}),o.createElement(c.Material.StyledTooltip,{title:this.props.resources.FindAndReplaceToolbar_Help,placement:"bottom"},o.createElement("a",{href:"https://support.panopto.com/s/article/How-to-Edit-or-Delete-Captions",target:"_blank",rel:"noreferrer"},o.createElement(l(),{className:this.props.classes.pressable,path:r.Gir,size:"24px","aria-hidden":!0}))),o.createElement(c.Material.StyledTooltip,{title:this.props.resources.FindAndReplaceToolbar_Close,placement:"bottom"},o.createElement("div",null,o.createElement(c.Input.IconButton,{className:this.props.classes.pressable,path:r.r5M,size:"24px",ariaLabel:this.props.resources.FindAndReplaceToolbar_Close,onActivate:this.props.onClose})))))}componentDidMount(){this.updateFindInputPadding()}componentDidUpdate(e){var t;e.query!==this.props.query&&this.updateFindInputPadding(),e.focusCounter!==this.props.focusCounter&&(null===(t=this.findInput.current)||void 0===t||t.focus())}updateFindInputPadding(){this.findInput.current&&this.matchControlsWrapper.current&&(this.findInput.current.style.paddingRight=this.matchControlsWrapper.current.clientWidth+"px")}getTitleWithKeyboardShortcut(e,t,n){const a=d.Browser.isMac?"Cmd":"Ctrl",s=d.Browser.isMac?"Opt":"Alt";return o.createElement("span",null,e,"   ",o.createElement("b",null,`${a}+${(null==n?void 0:n.alt)?s+"+":""}${t}`))}handleKeyDown(e){if(e.ctrlKey||e.metaKey)switch(e.nativeEvent.code){case"KeyP":e.preventDefault(),e.altKey?this.props.onReplaceAll():this.props.onReplace();break;case"BracketLeft":e.preventDefault(),e.altKey?this.previousButtonEnabled(this.props.lowConfidenceSpans,this.props.lowConfidenceSpanIndex)&&this.props.onPreviousLowConfidenceSpan():this.previousButtonEnabled(this.props.matches,this.props.matchIndex)&&this.props.onPreviousMatch();break;case"BracketRight":e.preventDefault(),e.altKey?this.nextButtonEnabled(this.props.lowConfidenceSpans,this.props.lowConfidenceSpanIndex)&&this.props.onNextLowConfidenceSpan():this.nextButtonEnabled(this.props.matches,this.props.matchIndex)&&this.props.onNextMatch()}else"Escape"===e.key&&(e.preventDefault(),this.props.onClose())}handleQueryChange(e){this.props.onQueryChange(e.target.value)}handleReplacementTextChange(e){this.props.onReplacementTextChange(e.target.value)}handleFindInputKeyDown(e){"Enter"===e.key&&(e.preventDefault(),!e.shiftKey&&this.nextButtonEnabled(this.props.matches,this.props.matchIndex)?this.props.onNextMatch():e.shiftKey&&this.previousButtonEnabled(this.props.matches,this.props.matchIndex)&&this.props.onPreviousMatch())}handleReplaceInputKeyDown(e){"Enter"===e.key&&(e.preventDefault(),void 0!==this.props.matchIndex&&this.props.onReplace())}previousButtonEnabled(e,t){return!!e&&void 0!==t&&t>0}nextButtonEnabled(e,t){return!!e&&void 0!==t&&t<e.length-1}}u([a.MR],m.prototype,"handleKeyDown",null),u([a.MR],m.prototype,"handleQueryChange",null),u([a.MR],m.prototype,"handleReplacementTextChange",null),u([a.MR],m.prototype,"handleFindInputKeyDown",null),u([a.MR],m.prototype,"handleReplaceInputKeyDown",null);const f=c.Material.withStyles((()=>c.Material.createStyles({root:{backgroundColor:"rgba(0, 0, 0, .05)",fontFamily:"Segoe UI,Helvetica,sans-serif",fontSize:"14px",color:"rgb(70, 70, 70)",padding:6,"& svg":{display:"block"},boxShadow:"#888 0px 3px 4px -3px"},findAndReplaceWrapper:{display:"flex",alignItems:"center",paddingBottom:6,gap:6},inputWrapper:{position:"relative",flexGrow:1},input:{border:"1px solid #cccccc",borderRadius:3,backgroundColor:"white",padding:6,fontFamily:"Segoe UI,Helvetica,sans-serif",fontSize:"14px",color:"rgb(70, 70, 70)",width:"100%",boxSizing:"border-box"},findInput:{paddingLeft:30},absoluteWrapper:{position:"absolute",top:0,bottom:0,userSelect:"none",display:"flex",padding:6,alignItems:"center"},findIconWrapper:{left:0},matchControlsWrapper:{right:0,paddingRight:2},buttonWrapper:{display:"flex",alignItems:"center",gap:6},pressable:{color:"rgb(70, 70, 70)",borderRadius:3,padding:4,"&:not(.disabled)":{"&:hover":{backgroundColor:"rgba(0, 0, 0, .05)"},"&:active":{backgroundColor:"rgba(0, 0, 0, .1)"},cursor:"pointer"},"&.disabled":{opacity:.5,cursor:"default"}},button:{padding:6,paddingRight:8,display:"flex",gap:6},replaceIcon:{width:"18px",height:"18px"},spacer:{flexGrow:1,flexShrink:1}})))(m)},6103:(e,t,n)=>{n.d(t,{l:()=>s,p:()=>i});var o=n(87363),a=n(76702);function s(e){return o.createElement(a.Material.SvgIcon,Object.assign({},e,{viewBox:"0 0 24 24"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 5H5C3.89 5 3 5.89 3 7V17C3 17.5304 3.21071 18.0391 3.58579 18.4142C3.96086 18.7893 4.46957 19 5 19H14.5472L12.6112 17H5V7H19V13.6628L21 11.7689V7C21 5.89 20.1 5 19 5ZM20.9354 17.5044L19.3983 18.9599C19.3986 18.9599 19.3988 18.9598 19.3991 18.9598L20.9352 17.5052C20.9352 17.5049 20.9353 17.5047 20.9354 17.5044ZM17.3308 19H17.332L15.396 17H15.3948L17.3308 19ZM16.8994 13H17V11H7V13H15.8839L16.3916 12.5192L16.8994 13Z",fill:"#626262"}),o.createElement("path",{d:"M15 16.5909L18.3 20L24 14.6023L22.608 13L18.3 17.0795L16.392 15.2727L15 16.5909Z",fill:"#626262"}))}function i(e){return o.createElement(a.Material.SvgIcon,Object.assign({},e,{viewBox:"0 0 24 24"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 3H5C3.89 3 3 3.89 3 5V19C3 19.5304 3.21071 20.0391 3.58579 20.4142C3.96086 20.7893 4.46957 21 5 21H14.5472L12.6112 19H5V5H19V15.6628L21 13.7689V5C21 3.89 20.1 3 19 3ZM20.9354 19.5044L19.3983 20.9599C19.3986 20.9599 19.3988 20.9598 19.3991 20.9598L20.9352 19.5052C20.9352 19.5049 20.9353 19.5047 20.9354 19.5044ZM17.3308 21H17.332L15.396 19H15.3948L17.3308 21ZM17 15.0953V15H16.8994L17 15.0953ZM15.8839 15H7V17H13.7719L15.8839 15ZM7 7H17V9H7V7ZM17 11H7V13H17V11Z",fill:"#626262"}),o.createElement("path",{d:"M15 18.5909L18.3 22L24 16.6023L22.608 15L18.3 19.0795L16.392 17.2727L15 18.5909Z",fill:"#626262"}))}},99030:(e,t,n)=>{n.d(t,{$T:()=>m,DN:()=>C,X8:()=>l,bv:()=>p,hs:()=>h,mw:()=>f,xK:()=>r});var o,a=n(12611),s=n(72779),i=n.n(s);!function(e){e[e.TextStart=0]="TextStart",e[e.MatchStart=1]="MatchStart",e[e.MatchEnd=2]="MatchEnd",e[e.ConfidenceStart=3]="ConfidenceStart",e[e.ConfidenceEnd=4]="ConfidenceEnd",e[e.TextEnd=5]="TextEnd"}(o||(o={}));const r=(e,t)=>{const n={caption:e,parts:[]},a=e.name||"",s=[{index:0,type:o.TextStart},{index:a.length,type:o.TextEnd}];if(t){let e=0;do{e=a.toLowerCase().indexOf(t.toLowerCase(),e),-1!==e&&(s.push({index:e,type:o.MatchStart}),s.push({index:e+t.length,type:o.MatchEnd}),e+=t.length)}while(-1!==e)}e.confidence&&e.confidence.spans.forEach((e=>{s.push({index:e.start,type:o.ConfidenceStart,confidence:e.confidence}),s.push({index:e.end,type:o.ConfidenceEnd})})),s.sort(((e,t)=>e.index===t.index?e.type-t.type:e.index-t.index));let i=!1,r=100,p=0;return s.forEach(((t,l)=>{switch(t.type){case o.MatchStart:i=!0;break;case o.MatchEnd:i=!1;break;case o.ConfidenceStart:r=void 0===t.confidence?100:t.confidence;break;case o.ConfidenceEnd:r=100}const c=s[l+1];c&&c.index>t.index&&(n.parts.push({id:e.id+"-"+p,text:a.substring(t.index,c.index),confidence:r,isMatch:i}),p++)})),n},p=e=>e.map((e=>e.text)).join(""),l=e=>{var t;const n=e.caption.copy();if(n.name=p(e.parts),n.confidence){n.confidence.spans=[];let o=0,a=0,s=100;e.parts.forEach(((e,t)=>{var i;e.confidence!==s&&(100!==s&&(null===(i=n.confidence)||void 0===i||i.spans.push({start:a,end:o,confidence:s})),100!==e.confidence&&(a=o),s=e.confidence),o+=e.text.length})),100!==s&&(null===(t=n.confidence)||void 0===t||t.spans.push({start:a,end:o,confidence:s}))}return n},c="caption-part-match",d="data-confidence",h=(e,t,n=100,o=c,a="caption-low-confidence",s="caption-part-highlighted-match")=>{let r="",p=!1;return e.parts.forEach((e=>{e.isMatch&&!p?(p=!0,r+=`<span class="${i()({[o]:!0,[s]:t&&-1!==t.parts.indexOf(e)})}">`):!e.isMatch&&p&&(p=!1,r+="</span>");const l=e.text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;");r+=`<span id="${e.id}" data-confidence="${e.confidence}"${e.confidence<n?` class="${a}"`:""}>${l}</span>`})),r},u=(e,t,n)=>{const o=[];return 0===e.children.length?o.push({id:a.uniqueId("parsedCaptionPart"),text:e.textContent||"",confidence:100,isMatch:!1}):(Array.from(e.children).forEach((e=>{var a;if((e.getAttribute("class")||"").indexOf(n)>=0){const a=u(e,t,n);a.forEach((e=>{e.isMatch=!0})),o.push(...a)}else o.push({id:e.id,text:(e.textContent||"").replace(/\u00a0/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&quot;/g,'"'),confidence:(null===(a=t.find((t=>t.id===e.id)))||void 0===a?void 0:a.text)!==e.textContent?100:parseInt(e.getAttribute(d)||"100",10),isMatch:!1})})),o.forEach(((e,n)=>{const a=o[n-1];if(e.confidence<100&&a){const n=t.find((e=>a.id===e.id));n&&n.text.charAt(n.text.length-1)!==a.text.charAt(a.text.length-1)&&(e.confidence=100)}}))),o},m=(e,t,n=c)=>({caption:t.caption.copy(),parts:u(e,t.parts,n)}),f=e=>{const t=[];return e.forEach((e=>{let n;e.parts.forEach((o=>{o.isMatch?(n||(n={parsedCaption:e,parts:[]},t.push(n)),n.parts.push(o)):n=void 0}))})),t},C=(e,t=100)=>{const n=[];return e.forEach((e=>{let o,a=100;e.parts.forEach((s=>{s.confidence<t?(o&&s.confidence===a||(o={parsedCaption:e,parts:[]},n.push(o)),o.parts.push(s)):o=void 0,a=s.confidence}))})),n}},70747:e=>{e.exports=PanoptoCore},76702:e=>{e.exports=PanoptoReactComponents},87363:e=>{e.exports=React},12611:e=>{e.exports=_},48488:e=>{e.exports=moment}},n={};function o(e){var a=n[e];if(void 0!==a)return a.exports;var s=n[e]={id:e,exports:{}};return t[e](s,s.exports,o),s.exports}o.m=t,e=[],o.O=(t,n,a,s)=>{if(!n){var i=1/0;for(c=0;c<e.length;c++){for(var[n,a,s]=e[c],r=!0,p=0;p<n.length;p++)(!1&s||i>=s)&&Object.keys(o.O).every((e=>o.O[e](n[p])))?n.splice(p--,1):(r=!1,s<i&&(i=s));if(r){e.splice(c--,1);var l=a();void 0!==l&&(t=l)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,a,s]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.j=9593,(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{o.b=document.baseURI||self.location.href;var e={9593:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var a,s,[i,r,p]=n,l=0;if(i.some((t=>0!==e[t]))){for(a in r)o.o(r,a)&&(o.m[a]=r[a]);if(p)var c=p(o)}for(t&&t(n);l<i.length;l++)s=i[l],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(c)},n=this.webpackChunk_panopto_webpack=this.webpackChunk_panopto_webpack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),o.nc=void 0;var a=o.O(void 0,[9351],(()=>o(71967)));a=o.O(a)})();
//# sourceMappingURL=file://seasyn/jenkinsbuilds/rel_rtc_13.6.0/13.6.0.00015/_PublishedWebsites/WebUI/Scripts/Panopto/Bundles/CaptionPane.js.map